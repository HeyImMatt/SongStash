(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{127:function(e,t,a){},130:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),l=a.n(c),o=(a(65),a(11)),u=a.n(o),s=a(15),i=a(21),m=a(10),E=a(22),d=a.n(E),f=Object({NODE_ENV:"production",PUBLIC_URL:"/static/client",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).SONG_STASH_API_URL||"http://127.0.0.1:5000/api";function b(e){return function(){var t=Object(s.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("".concat(f,"/users/").concat(e));case 2:return n=t.sent,t.abrupt("return",a({type:"FETCH_USER_DATA",data:n.data}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var O=a(144),p=a(137),S=a(132),h=a(133),v=a(134),g=a(135),_=a(136),j=a(18);a(88);function y(){var e=Object(m.b)(),t=function(){e({type:"CLEAR_CURRENT_SONG"})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{id:"main-nav-bar",color:"dark",dark:!0},r.a.createElement(h.a,{className:"mb-auto mx-auto w-100 text-center",href:"/"},"SongStash"),r.a.createElement(v.a,{navbar:!0,pills:!0,justified:!0,className:"h-75 w-100"},r.a.createElement(g.a,{className:"mx-auto my-auto"},r.a.createElement(_.a,null,"My Stashes")),r.a.createElement(g.a,{className:"mx-auto my-auto"},r.a.createElement(j.b,{to:"/mysongs"},r.a.createElement(_.a,null,"My Songs"))),r.a.createElement(g.a,{className:"mx-auto my-auto"},r.a.createElement(j.b,{to:"/searchsongs"},r.a.createElement(_.a,{onClick:t},"Song Search"))),r.a.createElement(g.a,{className:"mx-auto my-auto"},r.a.createElement(j.b,{to:"/createsong"},r.a.createElement(_.a,{onClick:t},"Create Song")))),r.a.createElement(_.a,{className:"d-block mx-auto mt-auto",href:"/logout"},"Log Out")))}var T=a(8),x=a(23),N=a(9),C=Object({NODE_ENV:"production",PUBLIC_URL:"/static/client",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).SONG_STASH_API_URL||"http://127.0.0.1:5000/api";function w(e,t){return function(){var a=Object(s.a)(u.a.mark((function a(n){var r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.post("".concat(C,"/songs"),Object(N.a)(Object(N.a)({},e),{},{user_id:t}));case 2:return r=a.sent,a.abrupt("return",n(R(r.data)));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}function R(e){return{type:"SET_CURRENT_SONG",data:e,isUserSong:!0}}var U=a(138),D=a(139),k=a(140),A=a(141),L=a(142),H=a(143);function I(e){var t=e.formData,a=e.formHandler,n=e.lyricsUrl,c=e.submitHandler,l=t.title,o=t.artist,u=t.lyrics;return r.a.createElement(p.a,{md:8,className:"text-center mx-auto"},r.a.createElement(U.a,{onSubmit:c},r.a.createElement(D.a,null,r.a.createElement(k.a,{for:"title"},"Title"),r.a.createElement(A.a,{type:"text",id:"title",name:"title",value:l,onChange:a,required:!0})),r.a.createElement(D.a,null,r.a.createElement(k.a,{for:"artist"},"Artist"),r.a.createElement(A.a,{type:"text",id:"artist",name:"artist",value:o,onChange:a,required:!0})),r.a.createElement(D.a,null,r.a.createElement(k.a,{for:"lyrics"},"Lyrics"),r.a.createElement(A.a,{type:"textarea",id:"lyrics",name:"lyrics",value:u,onChange:a,required:!0}),n&&r.a.createElement(L.a,null,"No guarantees, but you might be able to find the rest of the lyrics at:",r.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},n))),r.a.createElement(H.a,null,"Create Song")))}function P(){var e=Object(m.b)(),t=Object(T.g)(),a=Object(m.c)((function(e){return e.user})),c=Object(m.c)((function(e){return e.song})),l=Object(n.useState)(c||{id:null,title:"",artist:"",lyrics:""}),o=Object(i.a)(l,2),E=o[0],d=o[1],f=Object(n.useState)(!1),b=Object(i.a)(f,2),O=b[0],S=b[1];Object(n.useEffect)((function(){function n(){return(n=Object(s.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(E.id){n.next=5;break}return n.next=3,e(w(E,a.id));case 3:S(!1),t.push("/song");case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}O&&function(){n.apply(this,arguments)}()}),[e,O,E,a,t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{md:8,className:"text-center mx-auto mb-3"},r.a.createElement("h2",null,"Create Song")),r.a.createElement(I,{formData:E,formHandler:function(e){var t=e.target,a=t.name,n=t.value;d((function(e){return Object(N.a)(Object(N.a)({},e),{},Object(x.a)({},a,n))}))},submitHandler:function(e){e.preventDefault(),S(!0)}}))}function F(e){var t=e.song;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,t.title),r.a.createElement("h5",null,t.artist),r.a.createElement("span",{id:"lyrics",className:"mt-3",dangerouslySetInnerHTML:{__html:t.lyrics}}))}function W(){var e=Object(m.c)((function(e){return e.song}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{className:"text-center mx-auto mt-3"},r.a.createElement(F,{song:e})))}var q=Object({NODE_ENV:"production",PUBLIC_URL:"/static/client",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).SONG_STASH_API_URL||"http://127.0.0.1:5000/api";function K(e){return console.log(encodeURI(e)),function(){var t=Object(s.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("".concat(q,"/search/").concat(encodeURI(e)));case 2:return n=t.sent,t.abrupt("return",a(G(n.data)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function G(e){return console.log(e),{type:"SET_SEARCH_RESULTS",data:e}}function B(){var e=Object(m.b)(),t=Object(T.g)(),a=Object(n.useState)({query:""}),c=Object(i.a)(a,2),l=c[0],o=c[1],E=Object(n.useState)(!1),d=Object(i.a)(E,2),f=d[0],b=d[1];Object(n.useEffect)((function(){function t(){return(t=Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l.id){t.next=4;break}return t.next=3,e(K(l.query));case 3:b(!1);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}f&&function(){t.apply(this,arguments)}()}),[e,f,l,t]);return r.a.createElement(p.a,{md:8,className:"text-center mx-auto"},r.a.createElement("div",{className:"my-3"},r.a.createElement("h2",null,"Search Songs"),r.a.createElement("h5",null,"Enter artist, title, or song lyrics to find new songs")),r.a.createElement(U.a,{onSubmit:function(e){e.preventDefault(),b(!0)}},r.a.createElement(D.a,null,r.a.createElement(A.a,{type:"text",id:"query",name:"query",value:l.query,onChange:function(e){var t=e.target,a=t.name,n=t.value;o((function(e){return Object(N.a)(Object(N.a)({},e),{},Object(x.a)({},a,n))}))},required:!0})),r.a.createElement(H.a,null,"Search")))}var V=a(57),M=a.n(V);function X(e){e.songs;var t=Object(m.c)((function(e){return e.user})),a=Object(T.g)(),n=Object(m.b)(),c={onClick:function(e,t,r){n(R(t)),a.push("/song")}};return r.a.createElement(M.a,{bootstrap4:!0,keyField:"id",data:t.songs,columns:[{dataField:"artist",text:"Artist",sort:!0},{dataField:"title",text:"Song Title",sort:!0}],defaultSorted:[{dataField:"artist",order:"asc"}],rowEvents:c})}function J(){return r.a.createElement(T.d,null,r.a.createElement(T.b,{path:"/mysongs",exact:!0},r.a.createElement(X,null)),r.a.createElement(T.b,{path:"/createsong",exact:!0},r.a.createElement(P,null)),r.a.createElement(T.b,{path:"/searchsongs",exact:!0},r.a.createElement(B,null)),r.a.createElement(T.b,{path:"/song",exact:!0},r.a.createElement(W,null)),r.a.createElement(T.a,{to:"/"}))}a(127);var $=function(){var e=Object(m.c)((function(e){return e.user})),t=Object(m.b)(),a=Object(n.useState)(!0),c=Object(i.a)(a,2),l=c[0],o=c[1];return Object(n.useEffect)((function(){function a(){return(a=Object(s.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t(b(e.id));case 2:o(!1);case 3:case"end":return a.stop()}}),a)})))).apply(this,arguments)}l&&function(){a.apply(this,arguments)}()}),[t,l,e]),l?r.a.createElement("h3",null,"Loading"):r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,r.a.createElement(p.a,{id:"nav-col",md:2},r.a.createElement(y,null)),r.a.createElement(p.a,{md:10},r.a.createElement(J,null))))},z=a(20),Q=a(58),Y={};var Z={};var ee=a(40),te={id:parseInt(window.token),songs:[],stashes:[]};function ae(e){return e.map((function(e){return Object(N.a)(Object(N.a)({},e),{},{lyrics:e.lyrics.replace(/\n/g,"<br />")})}))}var ne=Object(z.c)({search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH_RESULTS":var a=t.data;return Object(N.a)(Object(N.a)({},e),{},{results:a});case"CLEAR_SEARCH_RESULTS":return Y;default:return e}},song:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_SONG":var a=t.data;return Object(N.a)(Object(N.a)({},e),{},{id:t.isUserSong?a.id:null,title:a.title,artist:a.artist,lyrics:a.lyrics});case"CLEAR_CURRENT_SONG":return Z;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_DATA":var a=ae(t.data.songs);return Object(N.a)(Object(N.a)({},e),{},{songs:Object(ee.a)(a),stashes:Object(ee.a)(t.data.stashes)});default:return e}}}),re=Object(z.e)(ne,Object(z.d)(Object(z.a)(Q.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(128),a(129);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(m.a,{store:re},r.a.createElement(j.a,null,r.a.createElement(T.b,{path:"/",component:$})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},60:function(e,t,a){e.exports=a(130)},65:function(e,t,a){},88:function(e,t,a){}},[[60,1,2]]]);
//# sourceMappingURL=main.9da22fa7.chunk.js.map