(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{134:function(e,t,a){},137:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),u=a.n(c),s=(a(72),a(5)),l=a.n(s),o=a(9),i=a(16),m=a(11),f=a(18),p=a.n(f),d=a(59),E=a(60),b=Object({NODE_ENV:"production",PUBLIC_URL:"/static/client",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).SONG_STASH_API_URL||"http://127.0.0.1:5000/api",h=function(){function e(){Object(d.a)(this,e)}return Object(E.a)(e,null,[{key:"addSongToStash",value:function(){var e=Object(o.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("".concat(b,"/stashes/songs"),{songId:t,stashId:a});case 3:return e.abrupt("return",{songId:t,stashId:a});case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteSongFromStash",value:function(){var e=Object(o.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.delete("".concat(b,"/stashes/songs/").concat(a,"/").concat(t));case 3:return e.abrupt("return",{songId:t,stashId:a});case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),O=Object({NODE_ENV:"production",PUBLIC_URL:"/static/client",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).SONG_STASH_API_URL||"http://127.0.0.1:5000/api";function S(){return function(){var e=Object(o.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(O,"/stashes"));case 2:return a=e.sent,e.abrupt("return",t({type:"SET_STASHES",data:a.data}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function v(e){return function(){var t=Object(o.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.post("".concat(O,"/stashes"),{name:e});case 2:return n=t.sent,t.abrupt("return",a({type:"SET_NEW_STASH",data:n.data}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function j(e,t){e.forEach(function(){var e=Object(o.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.addSongToStash(t,a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function g(e,t){e.forEach(function(){var e=Object(o.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.deleteSongFromStash(t,a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}var y=a(7),_=Object({NODE_ENV:"production",PUBLIC_URL:"/static/client",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).SONG_STASH_API_URL||"http://127.0.0.1:5000/api";function x(){return function(){var e=Object(o.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(_,"/songs"));case 2:return a=e.sent,n=k(a.data.songs),e.abrupt("return",t({type:"FETCH_USER_SONGS",data:n}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function w(e,t){return function(){var a=Object(o.a)(l.a.mark((function a(n){var r,c;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.post("".concat(_,"/songs"),Object(y.a)(Object(y.a)({},e),{},{user_id:t}));case 2:return r=a.sent,c=r.data.lyrics.replace(/\n/g,"<br />"),a.abrupt("return",n(C(Object(y.a)(Object(y.a)({},r.data),{},{lyrics:c}))));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}function T(e){return function(){var t=Object(o.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.delete("".concat(_,"/songs/").concat(e));case 2:if("200"!==t.sent.status){t.next=5;break}return t.abrupt("return",a({type:"DELETE_SONG"}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function N(e){return function(){var t=Object(o.a)(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get("".concat(_,"/lyrics/").concat(e.mmId));case 2:return n=t.sent,r=n.data.replace(/\n/g,"<br />"),t.abrupt("return",a(C(Object(y.a)(Object(y.a)({},e),{},{lyrics:r}))));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function k(e){return e.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{lyrics:e.lyrics.replace(/\n/g,"<br />")})}))}function C(e){return{type:"SET_CURRENT_SONG",data:e}}var R=a(164),L=a(157),H=a(151),D=a(152),A=a(153),U=a(154),I=a(155),P=a(156),W=a(165),F=a(13);a(95);function G(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.stash.stashes})),a=function(){e({type:"CLEAR_CURRENT_SONG"})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{id:"main-nav-bar",color:"dark",dark:!0},r.a.createElement(D.a,{className:"mx-auto w-100 text-center",href:"/"},"SongStash"),r.a.createElement(A.a,{navbar:!0,pills:!0,justified:!0,className:"h-75 w-100"},r.a.createElement("hr",null),r.a.createElement(U.a,{className:"mx-auto my-auto"},r.a.createElement(I.a,null,"My Stashes  ",r.a.createElement(F.b,{to:"/stash/createstash"},r.a.createElement(W.a,null))),t.map((function(e){return r.a.createElement(F.b,{to:"/stash/".concat(e.id)},r.a.createElement(P.a,null,e.name))}))),r.a.createElement("hr",null),r.a.createElement(U.a,{className:"mx-auto my-auto"},r.a.createElement(F.b,{to:"/mysongs"},r.a.createElement(P.a,null,"My Songs"))),r.a.createElement("hr",null),r.a.createElement(U.a,{className:"mx-auto my-auto"},r.a.createElement(F.b,{to:"/searchsongs"},r.a.createElement(P.a,{onClick:a},"Song Search"))),r.a.createElement("hr",null),r.a.createElement(U.a,{className:"mx-auto my-auto"},r.a.createElement(F.b,{to:"/createsong"},r.a.createElement(P.a,{onClick:a},"Create Song"))),r.a.createElement("hr",null),r.a.createElement(U.a,{className:"d-block mx-auto mt-auto"},r.a.createElement(F.b,{to:"/logout"},r.a.createElement(P.a,null,"Log Out"))))))}var K=a(12),q=a(25),B=a(158),M=a(159),V=a(160),X=a(161),J=a(162),Y=a(163);function $(e){var t=e.formData,a=e.formHandler,n=e.lyricsUrl,c=e.submitHandler,u=t.title,s=t.artist,l=t.lyrics;return r.a.createElement(L.a,{md:8,className:"text-center mx-auto"},r.a.createElement(B.a,{onSubmit:c},r.a.createElement(M.a,null,r.a.createElement(V.a,{for:"title"},"Title"),r.a.createElement(X.a,{type:"text",id:"title",name:"title",value:u,onChange:a,required:!0})),r.a.createElement(M.a,null,r.a.createElement(V.a,{for:"artist"},"Artist"),r.a.createElement(X.a,{type:"text",id:"artist",name:"artist",value:s,onChange:a,required:!0})),r.a.createElement(M.a,null,r.a.createElement(V.a,{for:"lyrics"},"Lyrics"),r.a.createElement(X.a,{type:"textarea",id:"lyrics",name:"lyrics",value:l,onChange:a,required:!0}),n&&r.a.createElement(J.a,null,"No guarantees, but you might be able to find the rest of the lyrics at:",r.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},n))),r.a.createElement(Y.a,null,"Create Song")))}function z(){var e=Object(m.b)(),t=Object(K.g)(),a=Object(m.c)((function(e){return e.song})),c=a.lyrics?a.lyrics.replace(/<br\s*\/?>/gm,"\n"):null,u=Object(n.useState)(Object(y.a)(Object(y.a)({},a),{},{lyrics:c})||{id:null,title:"",artist:"",lyrics:""}),s=Object(i.a)(u,2),f=s[0],p=s[1],d=Object(n.useState)(!1),E=Object(i.a)(d,2),b=E[0],h=E[1];Object(n.useEffect)((function(){function a(){return(a=Object(o.a)(l.a.mark((function a(){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(f.id){a.next=5;break}return a.next=3,e(w(f));case 3:h(!1),t.push("/song");case 5:case"end":return a.stop()}}),a)})))).apply(this,arguments)}b&&function(){a.apply(this,arguments)}()}),[e,b,f,t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{md:8,className:"text-center mx-auto mb-3"},r.a.createElement("h2",null,"Create Song")),r.a.createElement($,{formData:f,formHandler:function(e){var t=e.target,a=t.name,n=t.value;p((function(e){return Object(y.a)(Object(y.a)({},e),{},Object(q.a)({},a,n))}))},submitHandler:function(e){e.preventDefault(),h(!0)},lyricsUrl:a.lyricsLocation}))}var Q=a(64);function Z(e){var t=e.classes,a=e.text,n=e.clickHandler;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{color:"danger",className:t,onClick:n},a))}function ee(e){var t=e.song;return r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement("h3",null,t.title),r.a.createElement("h5",null,t.artist),r.a.createElement("hr",null),r.a.createElement("span",{id:"lyrics",className:"mt-3",dangerouslySetInnerHTML:{__html:t.lyrics}}),t.lyricsLocation&&r.a.createElement("div",{className:"mt-3"},r.a.createElement("p",null,"Lyrics preview provided by MusixMatch. Right song? Click below to add to your songs. You will be able to edit and add more lyrics on the next screen."),r.a.createElement(F.b,{to:"/createsong"},r.a.createElement(Y.a,{className:"mt-2"},"Add to My Songs"))))}function te(){var e=Object(K.g)(),t=Object(m.b)(),a=Object(m.c)((function(e){return e.song})),c=Object(m.c)((function(e){return e.stash.stashes})),u=c.reduce((function(e,t){return t.song_ids.includes(a.id)?(e.push({label:t.name,value:t.id}),e):e}),[]),s=Object(n.useState)(u),f=Object(i.a)(s,2),p=f[0],d=f[1],E=c.map((function(e){return{label:e.name,value:e.id}}));function b(){return(b=Object(o.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(T(a.id));case 2:e.goBack();case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function h(){return(h=Object(o.a)(l.a.mark((function e(){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=[],p.forEach((function(e){u.includes(e)||n.push(e.value)})),u.forEach((function(e){p.includes(e)||r.push(e.value)})),e.next=6,j(n,a.id);case 6:return e.next=8,g(r,a.id);case 8:return e.next=10,t(S());case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{md:10,className:"d-flex mt-3 justify-content-between"},r.a.createElement(Y.a,{className:"mr-auto",onClick:function(){return e.goBack()}},"Back"),r.a.createElement("h5",{className:"d-inline-block ml-2 my-auto"},"Stashes:"),r.a.createElement(Q.a,{hasSelectAll:!1,options:E,value:p,onChange:d,labelledBy:"Select Stashes",className:"d-inline-block ml-2 w-50"}),r.a.createElement(Y.a,{color:"warning",className:"ml-2",onClick:function(){return h.apply(this,arguments)}},"Update"),r.a.createElement(Z,{text:"Delete Song",classes:"ml-auto",clickHandler:function(){return b.apply(this,arguments)}})),r.a.createElement(L.a,{md:10,className:"text-center mx-auto mt-5"},r.a.createElement(ee,{song:a})))}var ae=a(61),ne=a.n(ae);function re(e){var t=e.songs,a=e.getLyrics,n=Object(m.c)((function(e){return e.song.songs})),c=Object(K.g)(),u=Object(m.b)(),s={onClick:function(e,n,r){u(t?a(n):C(n)),c.push("/song")}};return r.a.createElement(ne.a,{bootstrap4:!0,keyField:t?"mmId":"id",data:t||n,columns:[{dataField:"artist",text:"Artist",sort:!0},{dataField:"title",text:"Song Title",sort:!0}],defaultSorted:[{dataField:"artist",order:"asc"}],rowEvents:s})}var ce=Object({NODE_ENV:"production",PUBLIC_URL:"/static/client",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).SONG_STASH_API_URL||"http://127.0.0.1:5000/api";function ue(e){return function(){var t=Object(o.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get("".concat(ce,"/search/").concat(encodeURI(e)));case 2:return n=t.sent,t.abrupt("return",a({type:"SET_SEARCH_RESULTS",data:n.data}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function se(){var e=Object(m.b)(),t=Object(K.g)(),a=Object(m.c)((function(e){return e.search})),c=Object(n.useState)({query:""}),u=Object(i.a)(c,2),s=u[0],f=u[1],p=Object(n.useState)(!1),d=Object(i.a)(p,2),E=d[0],b=d[1];Object(n.useEffect)((function(){function t(){return(t=Object(o.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.id){t.next=4;break}return t.next=3,e(ue(s.query));case 3:b(!1);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}E&&function(){t.apply(this,arguments)}()}),[e,E,s,t]);return r.a.createElement(L.a,{md:8,className:"text-center mx-auto"},r.a.createElement("div",{className:"my-3"},r.a.createElement("h2",null,"Search Songs"),r.a.createElement("h5",null,"Enter artist, title, or song lyrics to find new songs")),r.a.createElement(B.a,{onSubmit:function(e){e.preventDefault(),b(!0)}},r.a.createElement(M.a,null,r.a.createElement(X.a,{type:"text",id:"query",name:"query",value:s.query,onChange:function(e){var t=e.target,a=t.name,n=t.value;f((function(e){return Object(y.a)(Object(y.a)({},e),{},Object(q.a)({},a,n))}))},required:!0})),r.a.createElement(Y.a,{className:"mb-3"},"Search")),a.results&&r.a.createElement(re,{songs:a.results,getLyrics:N}))}function le(e){var t=e.formData,a=e.formHandler,n=e.submitHandler;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Add a New Stash"),r.a.createElement(B.a,{onSubmit:n},r.a.createElement(M.a,null,r.a.createElement(V.a,{for:"name"},"Stash Name"),r.a.createElement(X.a,{type:"text",id:"name",name:"name",value:t.name,onChange:a,required:!0})),r.a.createElement(Y.a,{className:"mb-3"},"Add Stash")))}function oe(){var e=Object(m.b)(),t=Object(K.h)(),a=Object(K.g)(),c=Object(n.useState)({name:""}),u=Object(i.a)(c,2),s=u[0],f=u[1],p=Object(n.useState)(!1),d=Object(i.a)(p,2),E=d[0],b=d[1];Object(n.useEffect)((function(){function t(){return(t=Object(o.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.id){t.next=5;break}return t.next=3,e(v(s.name));case 3:b(!1),a.push("/");case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}E&&function(){t.apply(this,arguments)}()}),[e,E,s,a]);return r.a.createElement(L.a,{md:8,className:"text-center mx-auto"},r.a.createElement("div",{className:"my-3"},"/stash/createstash"===t.pathname&&r.a.createElement(le,{formData:s,formHandler:function(e){var t=e.target,a=t.name,n=t.value;f((function(e){return Object(y.a)(Object(y.a)({},e),{},Object(q.a)({},a,n))}))},submitHandler:function(e){e.preventDefault(),b(!0)}})))}function ie(){return r.a.createElement(K.d,null,r.a.createElement(K.b,{path:"/mysongs",exact:!0},r.a.createElement(re,null)),r.a.createElement(K.b,{path:"/createsong",exact:!0},r.a.createElement(z,null)),r.a.createElement(K.b,{path:"/searchsongs",exact:!0},r.a.createElement(se,null)),r.a.createElement(K.b,{path:"/song",exact:!0},r.a.createElement(te,null)),r.a.createElement(K.b,{path:"/stash/:id"},r.a.createElement(oe,null)),r.a.createElement(K.a,{to:"/"}))}a(134);var me=a(62),fe=a.n(me);var pe=function(){var e=Object(m.b)(),t=Object(n.useState)(!0),a=Object(i.a)(t,2),c=a[0],u=a[1],s=Object(n.useState)(!0),f=Object(i.a)(s,2),p=f[0],d=f[1];return Object(n.useEffect)((function(){function t(){return(t=Object(o.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(S());case 2:u(!1);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}c&&function(){t.apply(this,arguments)}()}),[e,c]),Object(n.useEffect)((function(){function t(){return(t=Object(o.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(x());case 2:d(!1);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}p&&function(){t.apply(this,arguments)}()}),[e,p]),r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,null,r.a.createElement(L.a,{id:"nav-col",md:2},!c&&r.a.createElement(G,null)),r.a.createElement(L.a,{md:10},c&&p&&r.a.createElement("img",{className:"d-block m-auto",src:fe.a,alt:"Music loader"}),!c&&!p&&r.a.createElement(ie,null))))},de=a(26),Ee=a(63),be={};var he=a(34),Oe={};var Se={};var ve=Object(de.c)({search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH_RESULTS":var a=t.data;return Object(y.a)(Object(y.a)({},e),{},{results:a});case"CLEAR_SEARCH_RESULTS":return be;default:return e}},song:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_SONGS":return Object(y.a)(Object(y.a)({},e),{},{songs:Object(he.a)(t.data)});case"SET_CURRENT_SONG":var a=t.data;return Object(y.a)(Object(y.a)({},e),{},{id:a.id?a.id:null,title:a.title,artist:a.artist,lyrics:a.lyrics,lyricsLocation:a.lyricsLocation?a.lyricsLocation:null});case"CLEAR_CURRENT_SONG":return Object(y.a)(Object(y.a)({},e),{},{id:"",title:"",artist:"",lyrics:"",lyricsLocation:""});case"DELETE_SONG":return Oe;default:return e}},stash:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STASHES":return Object(y.a)(Object(y.a)({},e),t.data);case"SET_NEW_STASH":return Object(y.a)(Object(y.a)({},e),{},{stashes:[].concat(Object(he.a)(e.stashes),[t.data])});default:return e}}}),je=Object(de.e)(ve,Object(de.d)(Object(de.a)(Ee.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(135),a(136);u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(m.a,{store:je},r.a.createElement(F.a,null,r.a.createElement(K.b,{path:"/",component:pe})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},62:function(e,t,a){e.exports=a.p+"media/music-loader.5dc251b2.gif"},67:function(e,t,a){e.exports=a(137)},72:function(e,t,a){},95:function(e,t,a){}},[[67,1,2]]]);
//# sourceMappingURL=main.93d2d1bf.chunk.js.map